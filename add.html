<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>도서 추가</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="my.css">
</head>
<body>
    <div class="container">
        <h1 class="my-4 text-center anime-title">도서 추가</h1>
        <form id="addForm">
            <div class="mb-3">
                <label for="rank" class="form-label">순위</label>
                <input type="number" class="form-control" id="rank" required>
            </div>
            <div class="mb-3">
                <label for="title" class="form-label">도서명</label>
                <input type="text" class="form-control" id="title" required>
            </div>
            <div class="mb-3">
                <label for="author" class="form-label">저자</label>
                <input type="text" class="form-control" id="author" required>
            </div>
            <div class="mb-3">
                <label for="publisher" class="form-label">출판사</label>
                <input type="text" class="form-control" id="publisher" required>
            </div>
            <div class="mb-3">
                <label for="year" class="form-label">출판년도</label>
                <input type="number" class="form-control" id="year" required>
            </div>
            <button type="submit" class="btn btn-primary">추가</button>
            <button type="button" class="btn btn-secondary" onclick="location.href='index.html'">취소</button>
        </form>
    </div>

    <script>
        document.getElementById('addForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const rank = parseInt(document.getElementById('rank').value);
            const title = document.getElementById('title').value;
            const author = document.getElementById('author').value;
            const publisher = document.getElementById('publisher').value;
            const year = document.getElementById('year').value;

            // 로컬 스토리지에서 기존 도서 목록을 가져옴
            let books = JSON.parse(localStorage.getItem('books')) || [];

            // 새 도서 추가
            const newBook = { rank, title, author, publisher, year };

            // 같은 순위를 입력하면 그 순위와 그 아래 순위가 밀리도록 처리
            books.forEach(book => {
                if (book.rank >= rank) {
                    book.rank += 1;  // 동일한 순위 또는 그 아래의 도서 순위를 한 단계 밀림
                }
            });

            // 새 도서 추가 후 다시 정렬
            books.push(newBook);
            books.sort((a, b) => a.rank - b.rank);

            // 로컬 스토리지에 다시 저장
            localStorage.setItem('books', JSON.stringify(books));

            alert('새로운 도서가 추가되었습니다!');
            location.href = 'index.html';
        });
    </script>
</body>
</html>
